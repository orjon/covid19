(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(37),s=n.n(c),o=(n(95),n(6)),i=n(5),u=n.p+"static/media/covid19Tracker_LogoSML.3a8d12c1.png",l=n(16),d=n(4),j=n.n(d),b=n(7),p=n(12),h=n.n(p),f="SET_ALERT",O="REMOVE_ALERT",v="REGISTER_SUCCESS",m="REGISTER_FAIL",g="AUTHORIZED",x="UNAUTHORIZED",y="USER_LOADED",N="AUTH_ERROR",w="LOGIN_SUCCESS",k="LOGIN_FAIL",C="LOGIN_GUEST",S="LOGOUT",M="COUNTRIES_LOADED",A="COUNTRIES_FAILED",L="COUNTRIES_UPDATE",E="GUEST_COUNTRIES_UPDATE",T="STATS_DELETE",D="STATS_LOADED",R="MULTI_STATS_LOADED",_="STATS_FAILED",G="SCALE_CHANGE",U="MEASURE_CHANGE",I="DATA_CHANGE",F=n(233),W=function(e,t){return function(n){var a=Object(F.a)();n({type:f,payload:{message:e,color:t,id:a}}),setTimeout((function(){return n({type:O,payload:a})}),5e3)}},H=function(e){e?h.a.defaults.headers.common.covidTrackerToken=e:delete h.a.defaults.headers.common.covidTrackerToken},P=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:C});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.token){e.next=5;break}console.log("Token is there!"),H(localStorage.token),e.next=6;break;case 5:return e.abrupt("return");case 6:return e.prev=6,e.next=9,h.a.get("/covidapi/user");case 9:n=e.sent,t({type:y,payload:n.data}),a={token:localStorage.token},t({type:g,payload:a}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),t({type:N});case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}()},J=function(){return function(e){e({type:x}),e({type:S})}},Y=(n(117),Object(i.b)(null,{logout:J})((function(e){var t=e.logout;return Object(a.jsx)("div",{className:"Logo",children:Object(a.jsx)(l.b,{onClick:t,to:"/",activeClassName:"selected",children:Object(a.jsxs)("div",{className:"flexRow center",children:[Object(a.jsx)("img",{className:"LogoImage",src:u,alt:"Covid19 Tracker App logo"}),Object(a.jsx)("div",{className:"LogoText",children:"Covid19 Tracker"})]})})})}))),z=Object(i.b)((function(e){return{name:e.currentUser.name}}),{logout:J})((function(e){var t=e.to,n=e.logout,r=e.name,c=t,s="login/register";return"logout"===c&&(c="",s="logout ".concat(r)),Object(a.jsx)(l.b,{exact:!0,onClick:n,to:"/".concat(c),className:"navItem indent10",activeClassName:"selected",children:Object(a.jsx)("div",{className:"gap5",children:s})})})),Z=n(17),K=n(83),V=n.n(K),q=n(56),Q=n.n(q),X=function(e){var t=e.locations,n=Object(r.useState)(!1),c=Object(Z.a)(n,2),s=c[0],o=c[1],i=function(){o((function(e){return!e}))},u=t.map((function(e){return Object(a.jsx)(z,{to:e},e)}));return Object(a.jsxs)("div",{className:"burgerMenu",children:[s?Object(a.jsx)("div",{className:"navIcon gap10",children:Object(a.jsx)(Q.a,{onClick:i})}):Object(a.jsx)("div",{className:"navIcon gap10",children:Object(a.jsx)(V.a,{onClick:i})}),s?Object(a.jsxs)("div",{className:"burgerMenuList gap20",onClick:i,children:[Object(a.jsx)("div",{className:"navIcon indent10",children:Object(a.jsx)(Q.a,{})}),Object(a.jsx)("div",{className:"navItem indent40",children:u})]}):null]})},$=(n(120),Object(i.b)((function(e){return{auth:e.auth}}),null)((function(e){var t=e.isHome,n=["login"];e.auth.isAuthenticated&&(n=["logout"]);var c=n.map((function(e){return Object(a.jsx)(z,{to:e},e)}));return Object(a.jsxs)("nav",{className:"Nav w100 indent10 gap10",children:[Object(a.jsx)(Y,{}),!t&&Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("div",{className:"navItems",children:c}),Object(a.jsx)("div",{className:"navBurger",children:Object(a.jsx)(X,{locations:n})})]})]})}))),ee=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/covidapi/countries");case 3:n=e.sent,console.log("Got "+n.data.length+" countries."),(a=n.data).forEach((function(e){e.country=e.country.split("(")[0].split(",")[0].replace(" and "," & ").trim(),e.slug=e.slug.replaceAll("\xe9","e")})),a.forEach((function(e){"ALA Aland Islands"===e.country?e.country="Aland Islands":"korea-north"===e.slug&&(e.country="North Korea")})),t({type:M,payload:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),t({type:A});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},te=(n(121),Object(i.b)((function(e){return{countriesLoaded:e.countryList.loaded}}),{getCountries:ee,loginGuest:P})((function(e){var t=e.countriesLoaded,n=e.getCountries,c=e.loginGuest,s=Object(o.g)();return Object(r.useEffect)((function(){t||(console.log("Getting countries"),n())}),[n,t]),Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)($,{isHome:"true"}),Object(a.jsx)("div",{className:"pageWrapper",children:Object(a.jsx)("div",{className:"Home",children:Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("button",{onClick:function(){c(),s.push("/main")},className:"guest",children:"Guest"}),Object(a.jsx)("button",{onClick:function(){return s.push("/login")},className:"register",children:"Login/Register"})]})})})]})}))),ne=n(25),ae=n(3),re=(n(66),Object(i.b)((function(e){return{isLoaded:e.currentUser.loaded,isAuthenticated:e.auth.isAuthenticated,countriesLoaded:e.countryList.loaded}}),{setAlert:W,login:function(e){var t=e.name,n=e.password;return function(){var e=Object(b.a)(j.a.mark((function e(a){var r,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,password:n}),e.prev=2,e.next=5,h.a.post("/covidapi/auth",c,r);case 5:s=e.sent,a({type:g,payload:s.data}),a(B()),a(W("Login success!","success")),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(2),(o=e.t0.response.data.errors)&&o.forEach((function(e){return a(W(e.msg,"warning"))})),a({type:x}),a({type:k});case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},getCountries:ee,loginGuest:P})((function(e){var t=e.login,n=(e.isAuthenticated,e.countriesLoaded),c=e.getCountries,s=e.setAlert,i=e.isLoaded,u=e.loginGuest,l=Object(o.g)();Object(r.useEffect)((function(){n||(console.log("Getting countries"),c())}),[c,n]);var d=Object(r.useState)({username:"",password:""}),p=Object(Z.a)(d,2),h=p[0],f=p[1],O=h.username,v=h.password,m=function(e){return f(Object(ae.a)(Object(ae.a)({},h),{},Object(ne.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),""===O&&""===v?s("Please enter user name and password!","warning"):""===O?s("Please enter user name!","warning"):""===v?s("Please enter password!","warning"):t({name:O,password:v});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i?Object(a.jsx)(o.a,{to:"/main"}):Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)($,{isHome:"true"}),Object(a.jsx)("div",{className:"pageWrapper",children:Object(a.jsx)("div",{className:"Login",children:Object(a.jsxs)("form",{onSubmit:function(e){return g(e)},children:[Object(a.jsx)("div",{className:"title",children:Object(a.jsx)("h1",{children:"Login"})}),Object(a.jsx)("div",{className:"field username",children:Object(a.jsx)("input",{id:"username",name:"username",value:O,onChange:function(e){return m(e)},type:"text",placeholder:"username"})}),Object(a.jsx)("div",{className:"field password",children:Object(a.jsx)("input",{id:"password",name:"password",value:v,onChange:function(e){return m(e)},type:"password",placeholder:"password"})}),Object(a.jsxs)("div",{className:"buttonWrapper",children:[Object(a.jsx)("button",{type:"submit",className:"login",children:"Login"}),Object(a.jsx)("button",{type:"button",onClick:function(){return l.push("/register")},className:"register faint",children:"Register"}),Object(a.jsx)("button",{type:"button",onClick:function(){u(),l.push("/main")},className:"register faint",children:"Guest"})]})]})})})]})}))),ce=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,countriesLoaded:e.countryList.loaded}}),{setAlert:W,register:function(e){var t=e.name,n=e.password;return function(){var e=Object(b.a)(j.a.mark((function e(a){var r,c,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,password:n}),e.prev=2,e.next=5,h.a.post("/covidapi/user",c,r);case 5:s=e.sent,a({type:v}),a({type:g,payload:s.data}),a(B()),a(W("Registration successful!","success")),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(2),(o=e.t0.response.data.errors)&&o.forEach((function(e){return a(W(e.msg,"warning"))})),a({type:x}),a({type:m});case 18:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},getCountries:ee,loginGuest:P})((function(e){var t=e.setAlert,n=e.register,c=e.isAuthenticated,s=e.countriesLoaded,i=e.getCountries,u=e.loginGuest,l=Object(o.g)();Object(r.useEffect)((function(){s||(console.log("Getting countries"),i())}),[i,s]);var d=Object(r.useState)({username:"",password:"",password2:""}),p=Object(Z.a)(d,2),h=p[0],f=p[1],O=h.username,v=h.password,m=h.password2,g=function(e){return f(Object(ae.a)(Object(ae.a)({},h),{},Object(ne.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(b.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),v!==m?t("Passwords do not match!","warning"):n({name:O.toLowerCase(),password:v});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?Object(a.jsx)(o.a,{to:"/main"}):Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)($,{isHome:"true"}),Object(a.jsx)("div",{className:"pageWrapper",children:Object(a.jsx)("div",{className:"Register",children:Object(a.jsxs)("form",{onSubmit:function(e){return x(e)},children:[Object(a.jsx)("div",{className:"title",children:Object(a.jsx)("h1",{children:"Register new user"})}),Object(a.jsx)("div",{className:"field username",children:Object(a.jsx)("input",{id:"username",name:"username",value:O,onChange:function(e){return g(e)},type:"text",placeholder:"user name"})}),Object(a.jsx)("div",{className:"field password",children:Object(a.jsx)("input",{id:"password",name:"password",value:v,onChange:function(e){return g(e)},type:"password",placeholder:"password"})}),Object(a.jsx)("div",{className:"field password2",children:Object(a.jsx)("input",{id:"password2",name:"password2",value:m,onChange:function(e){return g(e)},type:"password",placeholder:"password confirmation"})}),Object(a.jsxs)("div",{className:"buttonWrapper",children:[Object(a.jsx)("button",{type:"submit",className:"register",children:"Register"}),Object(a.jsx)("button",{type:"button",onClick:function(){return l.push("/login")},className:"login faint",children:"Login"}),Object(a.jsx)("button",{type:"button",onClick:function(){u(),l.push("/main")},className:"register faint",children:"Guest"})]})]})})})]})})),se=n(22),oe=n(85),ie=n.n(oe),ue=n(84),le=n.n(ue),de=function(e){var t=e.country,n=e.selectedCountries,c=e.listFull,s=t.country,o=t.flag,i=!1;return"Netherlands Antilles"===s&&(o="https://www.orjon.com/covid19/images/flag/netherlands_antilles.svg"),n.includes(t.slug)&&(i=!0),Object(a.jsx)(r.Fragment,{children:i?Object(a.jsxs)("div",{className:"Country checked ",children:[Object(a.jsx)("div",{className:"checkBox checked ".concat(c),children:Object(a.jsx)(le.a,{style:{fontSize:18}})}),Object(a.jsx)("img",{className:"flag",src:o,alt:"Flag of ".concat(t.country)}),Object(a.jsx)("p",{className:"countryName",children:s})]}):Object(a.jsxs)("div",{className:"Country ".concat(c),children:[Object(a.jsx)("div",{className:"checkBox unchecked ".concat(c),children:Object(a.jsx)(ie.a,{style:{fontSize:18}})}),Object(a.jsx)("img",{className:"flag",src:o,alt:"Flag of ".concat(t.country)}),Object(a.jsx)("p",{className:"countryName",children:s})]})})},je=(n(122),Object(i.b)((function(e){return{countryList:e.countryList,currentUser:e.currentUser}}),{setAlert:W,getCountries:ee,updateUserCountries:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var a,r,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.sort(),r=JSON.stringify({countries:e}),t.prev=3,t.next=6,h.a.post("/covidapi/user/countries",r,a);case 6:c=t.sent,n({type:L,payload:c.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),n({type:N});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},updateGuestCountries:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.sort(),n({type:E,payload:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.currentUser,n=e.countryList,c=e.getCountries,s=e.updateUserCountries,o=e.updateGuestCountries,i=e.setAlert;Object(r.useEffect)((function(){n.loaded||(console.log("Getting countries"),c())}),[c,n]),Object(r.useEffect)((function(){if(n.loaded&&!t.guest)console.log("Getting user countries"),j(t.countries);else if(n.loaded&&t.guest){for(var e=["united-kingdom"];e.length<5;){var a=Math.floor(Math.random()*n.countries.length);e.includes(n.countries[a].slug)||e.push(n.countries[a].slug)}j(e.sort())}}),[n.loaded]);var u=Object(r.useState)(t.countries),l=Object(Z.a)(u,2),d=l[0],j=l[1];Object(r.useEffect)((function(){t.guest?o(d):s(d)}),[d]);var b=!1;b=d.length>=10;var p=function(e){d.includes(e)?j(d.filter((function(t){return t!==e}))):b?i("Maximum countries reached. ".concat(d.length,"/10"),"warning"):j([].concat(Object(se.a)(d),[e]))},h=void 0,f=void 0;return n.countries.length>0&&(h=n.countries.filter((function(e){return d.includes(e.slug)})).map((function(e){return Object(a.jsx)("div",{className:"countryContainer",onClick:function(){return p(e.slug)},children:Object(a.jsx)(de,{country:e,selectedCountries:d,listFull:b})},e._id)})),f=n.countries.map((function(e){return Object(a.jsx)("div",{className:"countryContainer",onClick:function(){return p(e.slug)},children:Object(a.jsx)(de,{country:e,selectedCountries:d,listFull:b})},e._id)}))),Object(a.jsx)(r.Fragment,{children:h?Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)("div",{className:"top",children:[Object(a.jsxs)("div",{className:"subheader",children:[Object(a.jsxs)("h2",{children:["Selected ",d.length," (max 10)"]}),0===d.length&&Object(a.jsx)("div",{className:"instruction",children:"Select up to 10 countries from the list below"})]}),Object(a.jsx)("div",{className:"CountryList",children:h})]}),Object(a.jsx)("div",{className:"subheader",children:Object(a.jsxs)("h2",{children:["All Countries (",f.length,")"]})}),Object(a.jsx)("div",{className:"bottom",children:Object(a.jsx)("div",{className:"CountryList",children:f})})]}):Object(a.jsx)("div",{className:"header",children:Object(a.jsx)("h1",{children:"Loading countries..."})})})}))),be=n(86),pe=n.n(be),he=function(e,t){return t.find((function(t){return t.slug===e})).country},fe=function(e){return pe()(e).format("DD.MMM.YYYY")},Oe=function(e,t){return t.find((function(t){return t.slug===e})).population},ve=function(e,t){var n=Oe(e,t);return"(".concat(me(n),")")},me=function(e){var t=e;if(e>=1e3){for(var n=Math.floor((""+e).length/3),a="",r=2;r>=1;r--){if(((a=parseFloat((0!==n?e/Math.pow(1e3,n):e).toPrecision(r)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}a%1!==0&&(a=a.toFixed(1)),t=a+["","k","m","b","t"][n]}return t},ge=function(e,t,n){var a=Oe(e,n);return t.map((function(e){return(e/a*1e5).toFixed(1)}))},xe=function(e){var t=[];t.push(e[0]);for(var n=1;n<e.length;n++){var a=e[n]-e[n-1];a<0&&(a=0),t.push(a)}return t},ye=function(e){var t=Object(se.a)(e).reverse(),n=[];n.push(t[0]);for(var a=1;a<t.length;a++)t[a]>n[a-1]?n.push(n[a-1]):n.push(t[a]);return n.reverse(),n},Ne=["confirmed","deaths"],we=["rgba(255,0,0,".concat(1,")"),"rgba(0,255,0,".concat(1,")"),"rgba(0,0,175,".concat(1,")"),"rgba(255,195,0,".concat(1,")"),"rgba(144,0,255,".concat(1,")"),"rgba(0,114,255,".concat(1,")"),"rgba(255,125,0,".concat(1,")"),"rgba(50,150,00,".concat(1,")"),"rgba(225,0,225,".concat(1,")"),"rgba(0,255,255,".concat(1,")")],ke=n(40),Ce=(n(52),Object(i.b)((function(e){return{countries:e.countryList.countries,selectedCountries:e.stats.countries,chartModeData:e.stats.chartModeData,chartModeMeasure:e.stats.chartModeMeasure,chartModeScale:e.stats.chartModeScale}}),{})((function(e){var t=e.chartModeData,n=e.chartModeMeasure,c=e.chartModeScale,s=e.countries,o=e.selectedCountries;Object(r.useEffect)((function(){d(function(e){var t=e.chartModeMeasure,n=e.chartModeData,a=e.chartModeScale,r=e.countries,c=e.selectedCountries,s=[];switch(t){case 0:s=c.map((function(e){return{countrySlug:e.countrySlug,data:ye(e.data[Ne[n]])}}));break;case 1:s=c.map((function(e){return{countrySlug:e.countrySlug,data:xe(ye(e.data[Ne[n]]))}}));break;default:s=c.map((function(e){return{countrySlug:e.countrySlug,data:e.data[Ne[n]]}}))}switch(a){case 1:s=s.map((function(e){return{data:e.data}}));break;case 0:s=s.map((function(e){return{data:ge(e.countrySlug,e.data,r)}}));break;default:s=s.map((function(e){return{data:e.data}}))}return{labels:c[0].data.date.map((function(e){return fe(e)})),datasets:c.map((function(e,t){return{label:"".concat(he(e.countrySlug,r)," ").concat(ve(e.countrySlug,r)),data:s[t].data,backgroundColor:we[t],fill:!1,borderColor:we[t],borderWidth:1,pointRadius:1}}))}}({chartModeData:t,chartModeMeasure:n,chartModeScale:c,countries:s,selectedCountries:o}))}),[t,n,c,s,o]);var i=Object(r.useState)(null),u=Object(Z.a)(i,2),l=u[0],d=u[1];return Object(a.jsx)("div",{className:"LineChart",children:null!==l&&Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("div",{className:"chartWide",children:Object(a.jsx)(ke.Line,{redraw:!0,data:l,options:{legend:{onHover:function(e){e.target.style.cursor="pointer"},display:!0,position:"right",labels:{boxWidth:20}},scales:{xAxes:[{ticks:{minRotation:90,maxTicksLimit:40}}]},maintainAspectRatio:!1}})}),Object(a.jsx)("div",{className:"chartNormal",children:Object(a.jsx)(ke.Line,{redraw:!0,data:l,options:{legend:{onHover:function(e){e.target.style.cursor="pointer"},display:!0,position:"bottom",labels:{boxWidth:20}},scales:{xAxes:[{ticks:{minRotation:90,maxTicksLimit:20}}]},maintainAspectRatio:!1}})}),Object(a.jsx)("div",{className:"chartNarrow",children:Object(a.jsx)(ke.Line,{redraw:!0,data:l,options:{legend:{display:!0,position:"bottom",labels:{boxWidth:20}},scales:{xAxes:[{ticks:{minRotation:90,maxTicksLimit:10}}]},maintainAspectRatio:!1}})})]})})}))),Se=Object(i.b)((function(e){return{chartModeData:e.stats.chartModeData,chartModeMeasure:e.stats.chartModeMeasure,chartModeScale:e.stats.chartModeScale}}),{setMeasure:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:U,payload:e})}catch(a){console.error(a),n({type:_})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setData:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:I,payload:e})}catch(a){console.error(a),n({type:_})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setScale:function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:G,payload:e})}catch(a){console.error(a),n({type:_})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.mode,n=e.value,r=e.text,c=e.position,s=e.chartModeMeasure,o=e.chartModeData,i=e.chartModeScale,u=e.setMeasure,l=e.setData,d=e.setScale,j="";switch(t){case 0:n===o&&(j="selected");break;case 1:n===s&&(j="selected");break;case 2:n===i&&(j="selected");break;default:return void(j="")}return Object(a.jsx)("div",{className:"ModeButton ".concat(c," ").concat(j),onClick:function(){!function(){switch(t){case 0:l(n);break;case 1:u(n);break;case 2:d(n);break;default:l(n)}}()},children:r})})),Me=Object(i.b)((function(e){return{stats:e.stats,countryList:e.countryList,selectedCountries:e.stats.countries,chartModeData:e.stats.chartModeData,chartModeMeasure:e.stats.chartModeMeasure,chartModeScale:e.stats.chartModeScale}}),{})((function(e){var t=e.chartModeData,n=e.chartModeMeasure,c=e.chartModeScale,s=e.selectedCountries,o=e.stats,i=e.countryList,u="Title",l="from",d="to",j=null;if(s.length>0&&(u="".concat(["Confirmed\xa0Covid-19\xa0Cases","Covid-19\xa0Deaths"][t]," (").concat(["Cumulative","Daily"][n],"\xa0").concat(["per\xa0100k","total"][c],")"),l=fe(s[0].from),d=fe(s[0].to)),o.loaded&&o.notAvailable.length>0){var b=o.notAvailable.map((function(e){return he(e,i.countries)})).toString().replaceAll(",",", ");j=Object(a.jsxs)("div",{children:["No data currently available for: ",b]})}return Object(a.jsxs)("div",{className:"Chart",children:[0===s.length&&Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h1",{children:"Select countries to see Covid-19 data"}),j&&Object(a.jsx)("div",{children:j})]}),s.length>0&&Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)("div",{className:"title",children:[Object(a.jsx)("h1",{children:u}),l," - ",d]}),Object(a.jsxs)("div",{className:"controls",children:[Object(a.jsxs)("div",{className:"modeButtons",children:[Object(a.jsx)(Se,{text:"cases",position:"first",mode:0,value:0}),Object(a.jsx)(Se,{text:"deaths",position:"last",mode:0,value:1})]}),Object(a.jsxs)("div",{className:"modeButtons",children:[Object(a.jsx)(Se,{text:"per 100k",position:"first",mode:2,value:0}),Object(a.jsx)(Se,{text:"total",position:"last",mode:2,value:1})]})]}),Object(a.jsx)(Ce,{}),j&&Object(a.jsx)("div",{className:"note",children:j})]})]})})),Ae=(n(217),Object(i.b)((function(e){return{stats:e.stats,currentUser:e.currentUser,countryList:e.countryList}}),{getCountries:ee,deleteCountryStats:function(){return function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:T})}catch(n){console.error(n),t({type:_})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getStats:function(e){var t=e.userCountries;return function(){var e=Object(b.a)(j.a.mark((function e(n){var a,r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/covidapi/stats/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,Promise.all(t.map((function(e){return a(e)})));case 4:(r=e.sent).sort((function(e,t){return e.countrySlug<t.countrySlug?-1:e.countrySlug>t.countrySlug?1:0})),c=r.filter((function(e){return!1===e.dataAvailable})).map((function(e){return e.countrySlug})),s=r.filter((function(e){return!0===e.dataAvailable})),n({type:R,payload:{notAvailable:c,countriesStats:s}}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),n({type:_});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.countryList,n=e.stats,c=e.getCountries,s=e.deleteCountryStats,o=e.getStats,i=e.currentUser,u=i.countries,l="Loading "+i.countries.length+" country statistics...";return Object(r.useEffect)((function(){return s(),function(){s()}}),[s]),Object(r.useEffect)((function(){t.loaded||(console.log("Getting countries"),c())}),[c,t]),Object(r.useEffect)((function(){t.loaded&&o({userCountries:u})}),[t,u,o]),Object(a.jsxs)("div",{children:[Object(a.jsx)($,{}),Object(a.jsxs)("div",{className:"MainWrapper",children:[Object(a.jsx)("div",{className:"CountriesWrapper",children:Object(a.jsx)(je,{})}),Object(a.jsx)("div",{className:"ChartWrapper",children:n.loaded?Object(a.jsx)(Me,{}):Object(a.jsx)("div",{className:"Chart",children:Object(a.jsx)("div",{className:"title",children:Object(a.jsx)("h1",{children:l})})})})]})]})}))),Le=(n(218),n(219),Object(i.b)((function(e){return{alerts:e.alerts}}),{closeAlert:function(e){return function(t){t({type:O,payload:e})}}})((function(e){var t=e.alerts,n=e.closeAlert;return null!==t&&t.length>0&&t.map((function(e){return Object(a.jsx)("div",{className:"alertWrapper",children:Object(a.jsx)("div",{className:"alert ".concat(e.color),onClick:function(){return n(e.id)},children:Object(a.jsx)("div",{children:e.message})})},e.id)}))}))),Ee=n(21),Te=n(87),De=n(88),Re=[],_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case f:return[].concat(Object(se.a)(e),[a]);case O:return e.filter((function(e){return e.id!==a}));default:return e}},Ge={token:null,isAuthenticated:null,loaded:!1},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case g:return localStorage.setItem("token",a.token),Object(ae.a)(Object(ae.a)({},e),{},{token:a.token,isAuthenticated:!0,loaded:!0});case x:return localStorage.removeItem("token"),Object(ae.a)(Object(ae.a)({},e),{},{token:null,isAuthenticated:!1,loaded:!1});default:return e}},Ie={guest:!1,loaded:!1,countries:[],_id:void 0,name:void 0,date:void 0,__v:void 0},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case C:return Object(ae.a)(Object(ae.a)({},e),{},{guest:!0,loaded:!0});case y:return Object(ae.a)(Object(ae.a)(Object(ae.a)({},e),a),{},{loaded:!0});case v:case w:return Object(ae.a)(Object(ae.a)({},e),{},{guest:!1,loaded:!0});case L:case E:return Object(ae.a)(Object(ae.a)({},e),{},{countries:a});case m:case N:case k:case S:return Object(ae.a)(Object(ae.a)({},e),{},{loaded:!1,guest:!1,countries:[],_id:void 0,name:void 0,date:void 0,__v:void 0});default:return e}},We={countries:[],loaded:!1},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case M:return Object(ae.a)(Object(ae.a)({},e),{},{countries:a,loaded:!0});case A:return Object(ae.a)(Object(ae.a)({},e),{},{loading:!1});default:return e}},Pe={loaded:!1,countries:[],notAvailable:[],chartModeMeasure:0,chartModeData:0,chartModeScale:0},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case U:return Object(ae.a)(Object(ae.a)({},e),{},{chartModeMeasure:a});case G:return Object(ae.a)(Object(ae.a)({},e),{},{chartModeScale:a});case I:return Object(ae.a)(Object(ae.a)({},e),{},{chartModeData:a});case T:return Object(ae.a)(Object(ae.a)({},e),{},{countries:[],notAvailable:[],loaded:!1});case R:return Object(ae.a)(Object(ae.a)({},e),{},{notAvailable:a.notAvailable,countries:a.countriesStats,loaded:!0});case D:return Object(ae.a)(Object(ae.a)({},e),{},{countries:[].concat(Object(se.a)(e.countries),[a]),loaded:!0});case _:return Object(ae.a)(Object(ae.a)({},e),{},{loaded:!1});default:return e}},Je=Object(Ee.combineReducers)({alerts:_e,auth:Ue,countryList:He,currentUser:Fe,stats:Be}),Ye=[De.a],ze=Object(Ee.createStore)(Je,{},Object(Te.composeWithDevTools)(Ee.applyMiddleware.apply(void 0,Ye)));localStorage.token&&H(localStorage.token);var Ze=function(){return Object(r.useEffect)((function(){ze.dispatch(B())}),[]),Object(a.jsx)(i.a,{store:ze,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:"/",component:te}),Object(a.jsx)(o.b,{exact:!0,path:"/main",component:Ae}),Object(a.jsx)(o.b,{exact:!0,path:"/login",component:re}),Object(a.jsx)(o.b,{exact:!0,path:"/register",component:ce})]}),Object(a.jsx)(Le,{})]})})};s.a.render(Object(a.jsx)(l.a,{basename:"/covid19",children:Object(a.jsx)(Ze,{})}),document.getElementById("root"))},52:function(e,t,n){},66:function(e,t,n){},95:function(e,t,n){}},[[221,1,2]]]);
//# sourceMappingURL=main.0d8eda41.chunk.js.map